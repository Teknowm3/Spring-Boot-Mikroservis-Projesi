name: CI/CD Pipeline

on:
  push:
    branches:
      - main
      - master
      - develop
    paths:
      - 'projeOdevi/**'
      - 'ystFrontend/**'
      - '.github/workflows/**'
  pull_request:
    paths:
      - 'projeOdevi/**'
      - 'ystFrontend/**'
  workflow_dispatch:

concurrency:
  group: ci-${{ github.ref }}
  cancel-in-progress: true

env:
  JAVA_VERSION: '17'
  DOCKER_BUILDKIT: 1

jobs:
  # â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  # â•‘  STAGE 1: BUILD & TEST (GitHub Hosted - Parallel Matrix)       â•‘
  # â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  
  build-eureka:
    name: ğŸ—ï¸ Build Eureka Server
    runs-on: ubuntu-latest
    timeout-minutes: 10
    outputs:
      artifact-name: eureka-server-jar
    
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4

      - name: â˜• Set up JDK 17
        uses: actions/setup-java@v4
        with:
          distribution: temurin
          java-version: ${{ env.JAVA_VERSION }}
          cache: maven
          cache-dependency-path: projeOdevi/eureka-server/pom.xml

      - name: ğŸ”¨ Build Eureka Server
        working-directory: projeOdevi/eureka-server
        run: |
          chmod +x mvnw
          ./mvnw -B -ntp clean package -DskipTests

      - name: ğŸ“¦ Upload JAR Artifact
        uses: actions/upload-artifact@v4
        with:
          name: eureka-server-jar
          path: projeOdevi/eureka-server/target/*.jar
          retention-days: 1

  build-api-gateway:
    name: ğŸ—ï¸ Build API Gateway
    runs-on: ubuntu-latest
    timeout-minutes: 10
    outputs:
      artifact-name: api-gateway-jar
    
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4

      - name: â˜• Set up JDK 17
        uses: actions/setup-java@v4
        with:
          distribution: temurin
          java-version: ${{ env.JAVA_VERSION }}
          cache: maven
          cache-dependency-path: projeOdevi/api-gateway/pom.xml

      - name: ğŸ”¨ Build API Gateway
        working-directory: projeOdevi/api-gateway
        run: |
          chmod +x mvnw
          ./mvnw -B -ntp clean package -DskipTests

      - name: ğŸ“¦ Upload JAR Artifact
        uses: actions/upload-artifact@v4
        with:
          name: api-gateway-jar
          path: projeOdevi/api-gateway/target/*.jar
          retention-days: 1

  build-auth-service:
    name: ğŸ—ï¸ Build Auth Service
    runs-on: ubuntu-latest
    timeout-minutes: 10
    outputs:
      artifact-name: auth-service-jar
    
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4

      - name: â˜• Set up JDK 17
        uses: actions/setup-java@v4
        with:
          distribution: temurin
          java-version: ${{ env.JAVA_VERSION }}
          cache: maven
          cache-dependency-path: projeOdevi/auth-service/pom.xml

      - name: ğŸ”¨ Build Auth Service
        working-directory: projeOdevi/auth-service
        run: |
          chmod +x mvnw
          ./mvnw -B -ntp clean package -DskipTests

      - name: ğŸ“¦ Upload JAR Artifact
        uses: actions/upload-artifact@v4
        with:
          name: auth-service-jar
          path: projeOdevi/auth-service/target/*.jar
          retention-days: 1

  build-user-service:
    name: ğŸ—ï¸ Build User Service
    runs-on: ubuntu-latest
    timeout-minutes: 10
    outputs:
      artifact-name: user-service-jar
    
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4

      - name: â˜• Set up JDK 17
        uses: actions/setup-java@v4
        with:
          distribution: temurin
          java-version: ${{ env.JAVA_VERSION }}
          cache: maven
          cache-dependency-path: projeOdevi/user-service/pom.xml

      - name: ğŸ”¨ Build User Service
        working-directory: projeOdevi/user-service
        run: |
          chmod +x mvnw
          ./mvnw -B -ntp clean package -DskipTests

      - name: ğŸ“¦ Upload JAR Artifact
        uses: actions/upload-artifact@v4
        with:
          name: user-service-jar
          path: projeOdevi/user-service/target/*.jar
          retention-days: 1

  # â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  # â•‘  STAGE 2: DOCKER BUILD (Self-Hosted - Parallel Jobs)           â•‘
  # â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  docker-eureka:
    name: ğŸ³ Docker Eureka Server
    runs-on: self-hosted
    needs: build-eureka
    timeout-minutes: 15
    if: github.ref == 'refs/heads/main' && (github.event_name == 'push' || github.event_name == 'workflow_dispatch')
    
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4

      - name: ğŸ“¦ Download JAR Artifact
        uses: actions/download-artifact@v4
        with:
          name: eureka-server-jar
          path: projeOdevi/eureka-server/target/

      - name: ğŸ³ Build Docker Image
        run: |
          cd projeOdevi/eureka-server
          sudo docker build --build-arg BUILDKIT_INLINE_CACHE=1 \
            -t eureka-server:latest \
            -t eureka-server:${{ github.sha }} .
          echo "âœ… Eureka Server image built"

  docker-api-gateway:
    name: ğŸ³ Docker API Gateway
    runs-on: self-hosted
    needs: build-api-gateway
    timeout-minutes: 15
    if: github.ref == 'refs/heads/main' && (github.event_name == 'push' || github.event_name == 'workflow_dispatch')
    
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4

      - name: ğŸ“¦ Download JAR Artifact
        uses: actions/download-artifact@v4
        with:
          name: api-gateway-jar
          path: projeOdevi/api-gateway/target/

      - name: ğŸ³ Build Docker Image
        run: |
          cd projeOdevi/api-gateway
          sudo docker build --build-arg BUILDKIT_INLINE_CACHE=1 \
            -t api-gateway:latest \
            -t api-gateway:${{ github.sha }} .
          echo "âœ… API Gateway image built"

  docker-auth-service:
    name: ğŸ³ Docker Auth Service
    runs-on: self-hosted
    needs: build-auth-service
    timeout-minutes: 15
    if: github.ref == 'refs/heads/main' && (github.event_name == 'push' || github.event_name == 'workflow_dispatch')
    
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4

      - name: ğŸ“¦ Download JAR Artifact
        uses: actions/download-artifact@v4
        with:
          name: auth-service-jar
          path: projeOdevi/auth-service/target/

      - name: ğŸ³ Build Docker Image
        run: |
          cd projeOdevi/auth-service
          sudo docker build --build-arg BUILDKIT_INLINE_CACHE=1 \
            -t auth-service:latest \
            -t auth-service:${{ github.sha }} .
          echo "âœ… Auth Service image built"

  docker-user-service:
    name: ğŸ³ Docker User Service
    runs-on: self-hosted
    needs: build-user-service
    timeout-minutes: 15
    if: github.ref == 'refs/heads/main' && (github.event_name == 'push' || github.event_name == 'workflow_dispatch')
    
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4

      - name: ğŸ“¦ Download JAR Artifact
        uses: actions/download-artifact@v4
        with:
          name: user-service-jar
          path: projeOdevi/user-service/target/

      - name: ğŸ³ Build Docker Image
        run: |
          cd projeOdevi/user-service
          sudo docker build --build-arg BUILDKIT_INLINE_CACHE=1 \
            -t user-service:latest \
            -t user-service:${{ github.sha }} .
          echo "âœ… User Service image built"

  docker-frontend:
    name: ğŸ³ Docker Frontend
    runs-on: self-hosted
    needs: [build-eureka]  # Just needs one to start, frontend has no Java deps
    timeout-minutes: 15
    if: github.ref == 'refs/heads/main' && (github.event_name == 'push' || github.event_name == 'workflow_dispatch')
    
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4

      - name: ğŸ³ Build Docker Image
        run: |
          cd ystFrontend
          sudo docker build --build-arg BUILDKIT_INLINE_CACHE=1 \
            -t frontend:latest \
            -t frontend:${{ github.sha }} .
          echo "âœ… Frontend image built"

  # â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  # â•‘  STAGE 3: DISTRIBUTE IMAGES (Parallel to Workers)              â•‘
  # â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  distribute-worker-1:
    name: ğŸ“¤ Distribute to Worker-1
    runs-on: self-hosted
    needs: [docker-eureka]  # Just needs one docker job to complete to start
    timeout-minutes: 5
    
    steps:
      - name: ğŸ“¤ Pull Monitoring Images on Worker-1
        run: |
          echo "=== ğŸš€ Worker-1: Monitoring Stack ==="
          
          # Pull images directly on Worker-1 (much faster than transfer)
          ssh k8s-worker-1 "
            sudo ctr -n k8s.io images pull docker.io/prom/prometheus:latest &
            sudo ctr -n k8s.io images pull docker.io/grafana/loki:2.9.0 &
            sudo ctr -n k8s.io images pull docker.io/grafana/promtail:2.9.0 &
            sudo ctr -n k8s.io images pull docker.io/grafana/grafana:latest &
            wait
            echo 'âœ… All monitoring images pulled'
          "
          echo "âœ… Worker-1 monitoring images ready"

  distribute-worker-2:
    name: ğŸ“¤ Distribute to Worker-2
    runs-on: self-hosted
    needs: [docker-eureka, docker-auth-service]
    timeout-minutes: 10
    
    steps:
      - name: ğŸ“¤ Send Images to Worker-2
        run: |
          echo "=== ğŸš€ Worker-2: Eureka + Auth ==="
          sudo docker save eureka-server:latest auth-service:latest | gzip > /tmp/worker2-images.tar.gz
          scp /tmp/worker2-images.tar.gz k8s-worker-2:/tmp/
          ssh k8s-worker-2 "gunzip -c /tmp/worker2-images.tar.gz | sudo ctr -n k8s.io images import - && rm /tmp/worker2-images.tar.gz"
          rm -f /tmp/worker2-images.tar.gz
          echo "âœ… Worker-2 images ready"

  distribute-worker-3:
    name: ğŸ“¤ Distribute to Worker-3
    runs-on: self-hosted
    needs: [docker-api-gateway, docker-user-service, docker-frontend]
    timeout-minutes: 10
    
    steps:
      - name: ğŸ“¤ Send Images to Worker-3
        run: |
          echo "=== ğŸš€ Worker-3: Gateway + User + Frontend ==="
          sudo docker save api-gateway:latest user-service:latest frontend:latest | gzip > /tmp/worker3-images.tar.gz
          scp /tmp/worker3-images.tar.gz k8s-worker-3:/tmp/
          ssh k8s-worker-3 "gunzip -c /tmp/worker3-images.tar.gz | sudo ctr -n k8s.io images import - && rm /tmp/worker3-images.tar.gz"
          rm -f /tmp/worker3-images.tar.gz
          echo "âœ… Worker-3 images ready"

  # â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  # â•‘  STAGE 4: DEPLOY INFRASTRUCTURE (Sequential - Dependencies)    â•‘
  # â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  deploy-infrastructure:
    name: ğŸ—ï¸ Deploy Infrastructure
    runs-on: self-hosted
    needs: [distribute-worker-1, distribute-worker-2, distribute-worker-3]
    timeout-minutes: 15
    
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4

      - name: ğŸ” Create Namespace & Secrets
        run: |
          kubectl apply -f projeOdevi/k8s/namespace.yaml || true
          kubectl create secret generic mysql-secret \
            --from-literal=mysql-root-password=root \
            -n mikroservis --dry-run=client -o yaml | kubectl apply -f -

      - name: ğŸ¬ Deploy MySQL
        run: |
          kubectl apply -f projeOdevi/k8s/mysql-deployment.yaml
          echo "â³ Waiting for MySQL to be ready..."
          kubectl rollout status deployment/mysql -n mikroservis --timeout=180s

      - name: ğŸŒ Deploy Eureka Server
        run: |
          kubectl apply -f projeOdevi/k8s/eureka-deployment.yaml
          echo "â³ Waiting for Eureka to be ready..."
          kubectl rollout status deployment/eureka-server -n mikroservis --timeout=180s

  # â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  # â•‘  STAGE 5: DEPLOY SERVICES (Parallel - All at once)             â•‘
  # â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  deploy-monitoring:
    name: ğŸ“Š Deploy Monitoring Stack
    runs-on: self-hosted
    needs: deploy-infrastructure
    timeout-minutes: 10
    
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4

      - name: ğŸ“Š Deploy Prometheus, Loki, Grafana
        run: |
          echo "=== ğŸ“Š Worker-1: Monitoring Stack ==="
          kubectl apply -f projeOdevi/k8s/prometheus-deployment.yaml
          kubectl apply -f projeOdevi/k8s/loki-deployment.yaml
          kubectl apply -f projeOdevi/k8s/promtail-deployment.yaml
          kubectl apply -f projeOdevi/k8s/grafana-deployment.yaml

      - name: â³ Wait for Monitoring
        run: |
          kubectl rollout status deployment/prometheus -n mikroservis --timeout=120s || true
          kubectl rollout status deployment/loki -n mikroservis --timeout=120s || true
          kubectl rollout status deployment/grafana -n mikroservis --timeout=120s || true
          echo "âœ… Monitoring Stack ready"

  deploy-auth-service:
    name: ğŸ” Deploy Auth Service
    runs-on: self-hosted
    needs: deploy-infrastructure
    timeout-minutes: 10
    
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4

      - name: ğŸ” Deploy Auth Service
        run: |
          echo "=== ğŸ” Worker-2: Auth Service ==="
          kubectl apply -f projeOdevi/k8s/auth-deployment.yaml
          kubectl rollout status deployment/auth-service -n mikroservis --timeout=180s
          echo "âœ… Auth Service ready"

  deploy-user-service:
    name: ğŸ‘¤ Deploy User Service
    runs-on: self-hosted
    needs: deploy-infrastructure
    timeout-minutes: 10
    
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4

      - name: ğŸ‘¤ Deploy User Service
        run: |
          echo "=== ğŸ‘¤ Worker-3: User Service ==="
          kubectl apply -f projeOdevi/k8s/user-deployment.yaml
          kubectl rollout status deployment/user-service -n mikroservis --timeout=180s
          echo "âœ… User Service ready"

  deploy-api-gateway:
    name: ğŸšª Deploy API Gateway
    runs-on: self-hosted
    needs: [deploy-auth-service, deploy-user-service]  # Gateway needs backend services
    timeout-minutes: 10
    
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4

      - name: ğŸšª Deploy API Gateway
        run: |
          echo "=== ğŸšª Worker-3: API Gateway ==="
          kubectl apply -f projeOdevi/k8s/gateway-deployment.yaml
          kubectl rollout status deployment/api-gateway -n mikroservis --timeout=180s
          echo "âœ… API Gateway ready"

  deploy-frontend:
    name: ğŸŒ Deploy Frontend
    runs-on: self-hosted
    needs: deploy-api-gateway  # Frontend needs Gateway
    timeout-minutes: 10
    
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4

      - name: ğŸŒ Deploy Frontend
        run: |
          echo "=== ğŸŒ Worker-3: Frontend ==="
          kubectl apply -f projeOdevi/k8s/frontend-deployment.yaml
          kubectl rollout status deployment/frontend -n mikroservis --timeout=120s
          echo "âœ… Frontend ready"

  # â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  # â•‘  STAGE 6: VERIFY & SMOKE TEST                                  â•‘
  # â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  verify:
    name: âœ… Verify Deployment
    runs-on: self-hosted
    needs: [deploy-monitoring, deploy-frontend]
    timeout-minutes: 5
    
    steps:
      - name: ğŸ“‹ Show Deployment Status
        run: |
          echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
          echo "â•‘               ğŸ‰ DEPLOYMENT COMPLETE ğŸ‰                   â•‘"
          echo "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
          echo "â•‘ ğŸ“Š Worker-1: Prometheus, Loki, Promtail, Grafana           â•‘"
          echo "â•‘ ğŸ” Worker-2: MySQL, Eureka, Auth Service                   â•‘"
          echo "â•‘ ğŸŒ Worker-3: API Gateway, User Service, Frontend           â•‘"
          echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo ""

      - name: ğŸ“¦ List All Pods
        run: |
          echo "=== ğŸ“¦ PODS ==="
          kubectl get pods -n mikroservis -o wide --sort-by='.metadata.name'

      - name: ğŸ”Œ List All Services
        run: |
          echo "=== ğŸ”Œ SERVICES ==="
          kubectl get svc -n mikroservis

      - name: ğŸ¥ Health Check
        run: |
          echo "=== ğŸ¥ HEALTH CHECK ==="
          
          # Get all node IPs
          WORKER_1_IP=$(kubectl get nodes -o wide | grep worker-1 | awk '{print $6}' || echo "N/A")
          WORKER_2_IP=$(kubectl get nodes -o wide | grep worker-2 | awk '{print $6}' || echo "N/A")
          WORKER_3_IP=$(kubectl get nodes -o wide | grep worker-3 | awk '{print $6}' || echo "N/A")
          
          echo ""
          echo "=== ğŸ–¥ï¸ NODE IPs ==="
          echo "Worker-1: ${WORKER_1_IP}"
          echo "Worker-2: ${WORKER_2_IP}"
          echo "Worker-3: ${WORKER_3_IP}"
          echo ""
          echo "=== ğŸŒ ACCESS ENDPOINTS ==="
          echo "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
          echo "â”‚ ğŸ“Š WORKER-1 (Monitoring)                                      â”‚"
          echo "â”‚    Grafana:     http://${WORKER_1_IP}:30300                   â”‚"
          echo "â”‚    Prometheus:  http://${WORKER_1_IP}:30090                   â”‚"
          echo "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
          echo "â”‚ ï¿½ WORKER-2 (Core Services)                                   â”‚"
          echo "â”‚    Eureka:      http://${WORKER_2_IP}:31761                   â”‚"
          echo "â”‚    Auth API:    http://${WORKER_2_IP}:31720/api/auth          â”‚"
          echo "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
          echo "â”‚ ğŸŒ WORKER-3 (Frontend & Gateway)                              â”‚"
          echo "â”‚    Frontend:    http://${WORKER_3_IP}:30080                   â”‚"
          echo "â”‚    API Gateway: http://${WORKER_3_IP}:31720                   â”‚"
          echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
          echo ""
          echo "ğŸ“Š Grafana Credentials: admin / admin123"

      - name: ğŸ§¹ Cleanup Artifacts
        if: always()
        uses: geekyeggo/delete-artifact@v4
        with:
          name: |
            eureka-server-jar
            api-gateway-jar
            auth-service-jar
            user-service-jar
